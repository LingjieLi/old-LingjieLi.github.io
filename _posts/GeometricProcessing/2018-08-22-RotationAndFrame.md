---
layout:	post
title:	"三维旋转变换和局部正交标架(Rotation and Frame)"
data:	2018-08-22 14:00:00
categories: GeometricProcessing
tags:	计算机图形学 CG 变换
excerpt: 这是一篇记录自己学习过程中的文章
author: Lydia
mathjax: true
---

[TOC]
**!还有问题，基本思路是对的**
### **1 局部正交标架**
在欧式空间中，笛卡尔坐标系是指从一点及引出三个互相正交的单位向量 $\{O,i,j,k\}$，其中 $i,j,k$的方向符合右手系。
在欧式空间中，存在许多正交标架，称为局部正交标架簇。

### **2 三维旋转变换**
三维标架变换意味着将一个正交标架变化到另一个正交标架，标架在变换过程中保持了刚性。
如图1所示,有两个局部正交标架 $\{O,i,j,k\}$ 和 $\{P,e_i,e_2,e_3\}$

$$\matrix{ OP=a_1*i+a_2*j+a_3*k \\ e_1=a_{11}*i+a_{12}*j+a_{13}*k \\ e_2=a_{21}*i+a_{22}*j+a_{23}*k \\e_3=a_{31}*i+a_{32}*j+a_{33}*k \matrix}$$

其中，令
$$a=(a_1,a_2,a_3)$$
$$A=\matrix{ [a_{11} \ a_{12} \ a_{13} \\ a_{21} \ a_{22} \ a_{23} \\a_{31} \ a_{32} \ a_{33}]\matrix}$$

**补充图1，两个局部正交标架O(i,j,k) P(e1,e2,e3)**

用标架 $F，F'$表示两个局部标架, $T$代表从$F$到$F'$的旋转变换
$$F=\matrix{i(x) \  i(y) \ i(z) \ 0 \\ j(x) \ j(y) \ j(z) \ 0 \\ k(x) \  k(y) \ k(z) \ 0 \\ 0 \ \ \ 0 \ \ \ 0 \ \ \ 1\matrix}$$

$$F'=\matrix{e_1(x) \  e_1(y) \ e_2(z) \ 0 \\ e_2(x) \ e_2(y) \ e_2(z) \ 0 \\ e_3(x) \  e_3(y) \ e_3(z) \ 0 \\ 0 \ \ \ 0 \ \ \ 0 \ \ \ 1\matrix}$$

$$T=\matrix{ [a_{11} \ a_{12} \ a_{13} \ 0 \\ a_{21} \ a_{22} \ a_{23}  \ 0 \\a_{31} \ a_{32} \ a_{33} \ 0 \\ a_1 \  a_2 \ a_3 \ 1]\matrix}$$

因此
$$F'=T*F$$
$$T=F*inv(F')$$

这样就可求得旋转变换 $T$

### **3 坐标点在标架中的转换**
从一个标架到另一个标架是刚体变换，同样的，将标架 $F$中的点 $M(x,y,z)$ 变换到标架 $F'$ 中，坐标变为 $M'(x',y',z')$ ,也是一个刚体变换，即变换后点 $M$在 $\{O,i,j,k\}$ 中的相对位置与 $M'$ 在 $\{e_1,e_2,e_3\}$ 的相对位置相同。即
 $$OM=PM'$$

我们可将 $M(x,y,z)$ 表示为
$$OM=x*i+y*j+z*k$$
$$PM'=x'*e_1+y'*e_2+z'*e_3$$

因此
$$PM'=\\
x'*(a_{11}*i+a_{12}*j+a_{13}*k)+ \\ y'*(a_{21}*i+a_{22}*j+a_{23}*k)+\\ z'*(a_{31}*i+a_{32}*j+a_{33}*k) \\
= \\
(x'*a_{11}+y'*a_{21}+z'*a_{31})*i+\\
(x'*a_{12}+y'*a_{22}+z'*a_{32})*j+\\
(x'*a_{13}+y'*a_{23}+z'*a_{33})*k+\\$$

所以，
$$x=x'*a_{11}+y'*a_{21}+z'*a_{31}$$
$$y=x'*a_{12}+y'*a_{22}+z'*a_{32}$$
$$z=x'*a_{13}+y'*a_{23}+z'*a_{33}$$
即

$$\matrix{x \\ y \\ z\matrix}=\matrix{a_{11} \ a_{21} \ a_{31} \ 0 \\ a_{12} \ a_{22} \ a_{32} \ 0 \\ a_{13} \ a_{23} \ a_{33}  \ 0 \\0 \ 0 \ 0 \ 1\matrix}*\matrix{x' \\ y' \\ z'\\1 \matrix}+\matrix{a_1\\ a_2 \\a_3 \\0\matrix}$$
即
$$\matrix{x\\y\\z\\1\matrix}=\matrix{a_{11} \ a_{21} \ a_{31} \ a_1 \\ a_{12} \ a_{22} \ a_{32} \ a_2 \\ a_{13} \ a_{23} \ a_{33}  \ a_3 \\0 \ 0 \ 0 \ 1\matrix}*\matrix{x'\\y'\\z'\\1\matrix}$$
即
$$\matrix{x\\y\\z\\1\matrix}=T'*\matrix{x'\\y'\\z'\\1\matrix}$$

反过来
$$(x',y',z')=a+(x,y,z)*A$$
